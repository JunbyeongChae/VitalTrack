<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.BoardMapper">
<!-- select -->
<select id="boardList" parameterType="java.util.Map" resultType="java.util.Map">
  SELECT cs.counsel_no, cs.counsel_title, cs.counsel_content, DATE_FORMAT(cs.counsel_date, '%Y.%m.%d') AS counsel_date, mem.mem_nick
  FROM counsel cs
  JOIN member_info mem ON cs.mem_no = mem.mem_no
  WHERE 1=1
  <if test="counsel_no != null">
    AND cs.counsel_no = #{counsel_no}
  </if>
  <if test="gubun != null and keyword != null and gubun == 'counsel_title'">
    AND cs.counsel_title LIKE CONCAT('%', #{keyword}, '%')
  </if>
  <if test="gubun != null and keyword != null and gubun == 'counsel_content'">
    AND cs.counsel_content LIKE CONCAT('%', #{keyword}, '%')
  </if>
  ORDER BY cs.counsel_no DESC
</select>
<!-- insert -->
<insert id="boardInsert" parameterType="com.vitaltrack.model.CounselBoard">
  INSERT INTO counsel (counsel_title, counsel_content, counsel_writer, counsel_date, mem_no)
  VALUES (#{counsel_title}, #{counsel_content}, #{counsel_writer}, NOW(), #{mem_no})
</insert>
<!-- update -->
<update id="boardUpdate" parameterType="map">
  UPDATE counsel
  SET counsel_title = #{counsel_title},
      counsel_content = #{counsel_content},
      counsel_writer = #{counsel_writer}
  WHERE counsel_no = #{counsel_no}
</update>
<!-- delete -->
<delete id="boardDelete" parameterType="map">
  DELETE FROM counsel WHERE counsel_no = #{counsel_no}
</delete>
<!-- comment select -->
<!-- comment insert -->
<!-- comment update -->
<!-- comment delete -->
</mapper>